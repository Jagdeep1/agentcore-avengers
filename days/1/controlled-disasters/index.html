<!DOCTYPE html><html lang="en" data-theme="dark"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="canonical" href="https://jagdeep1.github.io/agentcore-avengers/days/1/controlled-disasters/"><!-- Favicon --><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><!-- Primary Meta Tags --><title>Controlled Disasters - Day 1 | The AgentCore Initiative</title><meta name="title" content="Controlled Disasters - Day 1 | The AgentCore Initiative"><meta name="description" content="Day 1: The First Avenger - Foundation - Strands Agent + AgentCore Runtime"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://jagdeep1.github.io/agentcore-avengers/days/1/controlled-disasters/"><meta property="og:title" content="Controlled Disasters - Day 1 | The AgentCore Initiative"><meta property="og:description" content="Day 1: The First Avenger - Foundation - Strands Agent + AgentCore Runtime"><meta property="og:image" content="https://jagdeep1.github.io/images/og/default.png"><!-- Twitter --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:url" content="https://jagdeep1.github.io/agentcore-avengers/days/1/controlled-disasters/"><meta name="twitter:title" content="Controlled Disasters - Day 1 | The AgentCore Initiative"><meta name="twitter:description" content="Day 1: The First Avenger - Foundation - Strands Agent + AgentCore Runtime"><meta name="twitter:image" content="https://jagdeep1.github.io/images/og/default.png"><!-- Fonts - Plus Jakarta Sans & Geist Mono --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet"><!-- Theme initialization (prevents flash) --><script>
      (function () {
        const stored = localStorage.getItem('agentcore-initiative-progress');
        let theme = 'dark';
        if (stored) {
          try {
            const progress = JSON.parse(stored);
            theme = progress.theme || 'dark';
          } catch (e) {}
        }
        if (theme === 'system') {
          theme = window.matchMedia('(prefers-color-scheme: light)').matches
            ? 'light'
            : 'dark';
        }
        document.documentElement.setAttribute('data-theme', theme);
      })();
    </script><link rel="stylesheet" href="/agentcore-avengers/_astro/_slug_.C6jciWkZ.css">
<style>.pagination[data-astro-cid-er2v6o3k]{display:flex;justify-content:space-between;gap:1rem}.pagination__link[data-astro-cid-er2v6o3k]{flex:1;max-width:50%;padding:1rem 1.25rem;background:var(--color-bg-elevated);border:var(--border-subtle);border-radius:var(--radius-lg);text-decoration:none;transition:all var(--transition-fast)}.pagination__link[data-astro-cid-er2v6o3k]:hover{background:var(--color-bg-secondary);border-color:var(--border-default)}.pagination__link--prev[data-astro-cid-er2v6o3k]{text-align:left}.pagination__link--next[data-astro-cid-er2v6o3k]{text-align:right;margin-left:auto}.pagination__label[data-astro-cid-er2v6o3k]{display:block;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;color:var(--color-text-muted);margin-bottom:.25rem}.pagination__title[data-astro-cid-er2v6o3k]{display:block;font-size:.9375rem;font-weight:500;color:var(--color-text-primary)}
</style>
<link rel="stylesheet" href="/agentcore-avengers/_astro/_slug_.CP5296fy.css"><style>.callout[data-astro-cid-wi7smz4x]{display:flex;gap:1rem;padding:1rem 1.25rem;border-radius:var(--radius-lg);margin:1.5rem 0;border-left:4px solid}.callout--info[data-astro-cid-wi7smz4x]{background:#3b82f614;border-left-color:var(--color-accent-primary)}.callout--info[data-astro-cid-wi7smz4x] .callout__icon[data-astro-cid-wi7smz4x]{color:var(--color-accent-primary)}.callout--warning[data-astro-cid-wi7smz4x]{background:#f59e0b14;border-left-color:var(--color-accent-warning)}.callout--warning[data-astro-cid-wi7smz4x] .callout__icon[data-astro-cid-wi7smz4x]{color:var(--color-accent-warning)}.callout--danger[data-astro-cid-wi7smz4x]{background:#ef444414;border-left-color:var(--color-accent-danger)}.callout--danger[data-astro-cid-wi7smz4x] .callout__icon[data-astro-cid-wi7smz4x]{color:var(--color-accent-danger)}.callout--success[data-astro-cid-wi7smz4x]{background:#10b98114;border-left-color:var(--color-accent-success)}.callout--success[data-astro-cid-wi7smz4x] .callout__icon[data-astro-cid-wi7smz4x]{color:var(--color-accent-success)}.callout--tip[data-astro-cid-wi7smz4x]{background:#8b5cf614;border-left-color:var(--color-accent-purple)}.callout--tip[data-astro-cid-wi7smz4x] .callout__icon[data-astro-cid-wi7smz4x]{color:var(--color-accent-purple)}.callout__icon[data-astro-cid-wi7smz4x]{flex-shrink:0;width:1.25rem;height:1.25rem;margin-top:.125rem}.callout__content[data-astro-cid-wi7smz4x]{flex:1;min-width:0}.callout__title[data-astro-cid-wi7smz4x]{font-weight:600;font-size:.9375rem;color:var(--color-text-primary);margin-bottom:.25rem}.callout__body[data-astro-cid-wi7smz4x]{font-size:.9375rem;color:var(--color-text-secondary);line-height:1.6}.callout__body[data-astro-cid-wi7smz4x] p{margin:0}.callout__body[data-astro-cid-wi7smz4x] p+p{margin-top:.5rem}.callout__body[data-astro-cid-wi7smz4x] code{font-size:.85em}.callout__body[data-astro-cid-wi7smz4x] a{font-weight:500}
</style><style>.disaster[data-astro-cid-gekp2zu6]{position:relative;margin:2rem 0;padding:1.5rem;background:linear-gradient(135deg,#ef44440d,#ef444405);border:1px solid rgba(239,68,68,.2);border-radius:var(--radius-xl);overflow:hidden}.disaster[data-astro-cid-gekp2zu6]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--color-accent-danger),rgba(239,68,68,.3))}.disaster__header[data-astro-cid-gekp2zu6]{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem}.disaster__icon[data-astro-cid-gekp2zu6]{width:1.5rem;height:1.5rem;color:var(--color-accent-danger);animation:pulse-icon 2s ease-in-out infinite}@keyframes pulse-icon{0%,to{opacity:1}50%{opacity:.5}}.disaster__badge[data-astro-cid-gekp2zu6]{font-family:var(--font-mono);font-size:.625rem;font-weight:700;letter-spacing:.1em;color:var(--color-accent-danger);padding:.25rem .625rem;background:#ef444426;border-radius:var(--radius-sm)}.disaster__title[data-astro-cid-gekp2zu6]{font-size:1.25rem;font-weight:700;color:var(--color-text-primary);margin:0 0 1.25rem}.disaster__sections[data-astro-cid-gekp2zu6]{display:flex;flex-direction:column;gap:1rem}.disaster__section[data-astro-cid-gekp2zu6]{padding:1rem;background:var(--color-bg-primary);border-radius:var(--radius-lg);border:1px solid var(--border-subtle)}.disaster__section--solution[data-astro-cid-gekp2zu6]{border-color:#10b9814d;background:linear-gradient(135deg,rgba(16,185,129,.05) 0%,var(--color-bg-primary) 100%)}.disaster__label[data-astro-cid-gekp2zu6]{display:flex;align-items:center;gap:.5rem;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;color:var(--color-text-muted);margin-bottom:.5rem}.disaster__label[data-astro-cid-gekp2zu6] svg[data-astro-cid-gekp2zu6]{width:1rem;height:1rem}.disaster__section[data-astro-cid-gekp2zu6]:nth-child(1) .disaster__label[data-astro-cid-gekp2zu6] svg[data-astro-cid-gekp2zu6]{color:var(--color-accent-warning)}.disaster__section[data-astro-cid-gekp2zu6]:nth-child(2) .disaster__label[data-astro-cid-gekp2zu6] svg[data-astro-cid-gekp2zu6]{color:var(--color-accent-danger)}.disaster__section--solution[data-astro-cid-gekp2zu6] .disaster__label[data-astro-cid-gekp2zu6] svg[data-astro-cid-gekp2zu6]{color:var(--color-accent-success)}.disaster__text[data-astro-cid-gekp2zu6]{font-size:.9375rem;color:var(--color-text-secondary);line-height:1.6;margin:0}.disaster__link[data-astro-cid-gekp2zu6]{display:inline-flex;align-items:center;margin-top:.75rem;font-size:.875rem;font-weight:500;color:var(--color-accent-success);text-decoration:none}.disaster__link[data-astro-cid-gekp2zu6]:hover{text-decoration:underline}
</style></head> <body>  <header class="header" data-astro-cid-mb6pvx4c> <div class="header__container" data-astro-cid-mb6pvx4c> <!-- Logo --> <a href="/agentcore-avengers/" class="header__logo" aria-label="Home" data-astro-cid-mb6pvx4c> <svg class="header__logo-icon" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" data-astro-cid-mb6pvx4c> <circle cx="16" cy="16" r="14" stroke="currentColor" stroke-width="2" data-astro-cid-mb6pvx4c></circle> <path d="M16 6 L22 12 L16 18 L10 12 Z" fill="currentColor" opacity="0.5" data-astro-cid-mb6pvx4c></path> <circle cx="16" cy="16" r="4" fill="currentColor" data-astro-cid-mb6pvx4c></circle> </svg> <span class="header__logo-text" data-astro-cid-mb6pvx4c>AgentCore Initiative</span> </a> <!-- Desktop Navigation --> <nav class="header__nav hide-mobile" aria-label="Main navigation" data-astro-cid-mb6pvx4c> <ul class="header__nav-list" data-astro-cid-mb6pvx4c> <li data-astro-cid-mb6pvx4c> <a href="/agentcore-avengers/days" class="header__nav-link header__nav-link--active" data-astro-cid-mb6pvx4c> Course </a> </li><li data-astro-cid-mb6pvx4c> <a href="/agentcore-avengers/troubleshooting" class="header__nav-link" data-astro-cid-mb6pvx4c> Troubleshooting </a> </li><li data-astro-cid-mb6pvx4c> <a href="/agentcore-avengers/reference" class="header__nav-link" data-astro-cid-mb6pvx4c> Reference </a> </li> </ul> </nav> <!-- Actions --> <div class="header__actions" data-astro-cid-mb6pvx4c> <!-- Theme Toggle Button (placeholder - will be React component) --> <button id="theme-toggle" class="header__theme-toggle" aria-label="Toggle theme" type="button" data-astro-cid-mb6pvx4c> <svg class="header__theme-icon header__theme-icon--dark" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-mb6pvx4c> <circle cx="12" cy="12" r="5" data-astro-cid-mb6pvx4c></circle> <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" data-astro-cid-mb6pvx4c></path> </svg> <svg class="header__theme-icon header__theme-icon--light" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-mb6pvx4c> <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-astro-cid-mb6pvx4c></path> </svg> </button> <!-- Mobile Menu Toggle --> <button id="mobile-menu-toggle" class="header__mobile-toggle hide-desktop" aria-label="Toggle menu" aria-expanded="false" type="button" data-astro-cid-mb6pvx4c> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-mb6pvx4c> <path class="menu-icon" d="M4 6h16M4 12h16M4 18h16" data-astro-cid-mb6pvx4c></path> <path class="close-icon" d="M6 6l12 12M6 18L18 6" style="display: none" data-astro-cid-mb6pvx4c></path> </svg> </button> </div> </div> <!-- Mobile Navigation --> <nav id="mobile-nav" class="header__mobile-nav hide-desktop" aria-label="Mobile navigation" hidden data-astro-cid-mb6pvx4c> <ul class="header__mobile-nav-list" data-astro-cid-mb6pvx4c> <li data-astro-cid-mb6pvx4c> <a href="/agentcore-avengers/days" class="header__mobile-nav-link header__mobile-nav-link--active" data-astro-cid-mb6pvx4c> Course </a> </li><li data-astro-cid-mb6pvx4c> <a href="/agentcore-avengers/troubleshooting" class="header__mobile-nav-link" data-astro-cid-mb6pvx4c> Troubleshooting </a> </li><li data-astro-cid-mb6pvx4c> <a href="/agentcore-avengers/reference" class="header__mobile-nav-link" data-astro-cid-mb6pvx4c> Reference </a> </li> </ul> </nav> </header>  <script type="module">const r=document.getElementById("theme-toggle");r&&r.addEventListener("click",()=>{const e=document.documentElement,t=e.getAttribute("data-theme")==="dark"?"light":"dark";e.setAttribute("data-theme",t);const c=localStorage.getItem("agentcore-initiative-progress");let i={theme:t};if(c)try{i={...JSON.parse(c),theme:t}}catch{}localStorage.setItem("agentcore-initiative-progress",JSON.stringify(i))});const n=document.getElementById("mobile-menu-toggle"),l=document.getElementById("mobile-nav");n&&l&&n.addEventListener("click",()=>{const e=n.getAttribute("aria-expanded")==="true";n.setAttribute("aria-expanded",String(!e)),l.hidden=e;const o=n.querySelector(".menu-icon"),t=n.querySelector(".close-icon");o&&t&&(o.style.display=e?"block":"none",t.style.display=e?"none":"block")});</script> <div class="day-layout" style="--day-accent: #3b82f6" data-astro-cid-vfeiczyy> <!-- Sidebar --> <aside class="day-layout__sidebar hide-mobile" data-astro-cid-vfeiczyy> <div class="day-layout__sidebar-content" data-astro-cid-vfeiczyy> <!-- Day Header --> <div class="day-layout__day-header" data-astro-cid-vfeiczyy> <span class="day-layout__day-number" data-astro-cid-vfeiczyy>Day 1</span> <h2 class="day-layout__day-title" data-astro-cid-vfeiczyy>The First Avenger</h2> <p class="day-layout__day-focus" data-astro-cid-vfeiczyy>Foundation - Strands Agent + AgentCore Runtime</p> </div> <!-- Section Navigation --> <nav class="day-layout__nav" aria-label="Day sections" data-astro-cid-vfeiczyy> <ul class="day-layout__nav-list" data-astro-cid-vfeiczyy> <li data-astro-cid-vfeiczyy> <a href="/agentcore-avengers/days/1/setup" class="day-layout__nav-link" data-section="setup" data-astro-cid-vfeiczyy> <span class="day-layout__nav-check" aria-hidden="true" data-astro-cid-vfeiczyy> <svg viewBox="0 0 16 16" fill="none" data-astro-cid-vfeiczyy> <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5" data-astro-cid-vfeiczyy></circle> <path class="check-mark" d="M5 8l2 2 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-vfeiczyy></path> </svg> </span> Environment Setup </a> </li><li data-astro-cid-vfeiczyy> <a href="/agentcore-avengers/days/1/strands-basics" class="day-layout__nav-link" data-section="strands-basics" data-astro-cid-vfeiczyy> <span class="day-layout__nav-check" aria-hidden="true" data-astro-cid-vfeiczyy> <svg viewBox="0 0 16 16" fill="none" data-astro-cid-vfeiczyy> <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5" data-astro-cid-vfeiczyy></circle> <path class="check-mark" d="M5 8l2 2 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-vfeiczyy></path> </svg> </span> Strands Basics </a> </li><li data-astro-cid-vfeiczyy> <a href="/agentcore-avengers/days/1/agentcore-runtime" class="day-layout__nav-link" data-section="agentcore-runtime" data-astro-cid-vfeiczyy> <span class="day-layout__nav-check" aria-hidden="true" data-astro-cid-vfeiczyy> <svg viewBox="0 0 16 16" fill="none" data-astro-cid-vfeiczyy> <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5" data-astro-cid-vfeiczyy></circle> <path class="check-mark" d="M5 8l2 2 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-vfeiczyy></path> </svg> </span> AgentCore Runtime </a> </li><li data-astro-cid-vfeiczyy> <a href="/agentcore-avengers/days/1/controlled-disasters" class="day-layout__nav-link day-layout__nav-link--active" data-section="controlled-disasters" data-astro-cid-vfeiczyy> <span class="day-layout__nav-check" aria-hidden="true" data-astro-cid-vfeiczyy> <svg viewBox="0 0 16 16" fill="none" data-astro-cid-vfeiczyy> <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5" data-astro-cid-vfeiczyy></circle> <path class="check-mark" d="M5 8l2 2 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-vfeiczyy></path> </svg> </span> Controlled Disasters </a> </li> </ul> </nav> <!-- Challenge Link --> <a href="/agentcore-avengers/days/1/challenge" class="day-layout__challenge-link" data-astro-cid-vfeiczyy> <span class="day-layout__challenge-icon" data-astro-cid-vfeiczyy> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-vfeiczyy> <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" data-astro-cid-vfeiczyy></polygon> </svg> </span>
Daily Challenge
</a> </div> </aside> <!-- Main Content --> <main class="day-layout__main" data-astro-cid-vfeiczyy> <article class="day-layout__content prose" data-astro-cid-vfeiczyy>  <h1 id="controlled-disasters">Controlled Disasters</h1>
<p>Congratulations! You have a working agent deployed to production. But production isn’t just about “working” - it’s about <strong>working correctly under real-world conditions</strong>.</p>
<p>This section introduces <strong>controlled disasters</strong>: intentional failures that reveal why AgentCore Runtime’s enterprise features aren’t optional.</p>
<h2 id="the-timeout-terror">The Timeout Terror</h2>
<div class="disaster" data-astro-cid-gekp2zu6> <div class="disaster__header" data-astro-cid-gekp2zu6> <div class="disaster__icon" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z" data-astro-cid-gekp2zu6></path> <path d="M12 9v4" data-astro-cid-gekp2zu6></path> <path d="M12 17h.01" data-astro-cid-gekp2zu6></path> </svg> </div> <div class="disaster__badge" data-astro-cid-gekp2zu6>CONTROLLED DISASTER</div> </div> <h4 class="disaster__title" data-astro-cid-gekp2zu6>The Timeout Terror</h4> <div class="disaster__sections" data-astro-cid-gekp2zu6> <div class="disaster__section" data-astro-cid-gekp2zu6> <span class="disaster__label" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <circle cx="12" cy="12" r="10" data-astro-cid-gekp2zu6></circle> <path d="M12 8v4" data-astro-cid-gekp2zu6></path> <path d="M12 16h.01" data-astro-cid-gekp2zu6></path> </svg>
Symptom
</span> <p class="disaster__text" data-astro-cid-gekp2zu6>Complex tasks fail mid-execution with timeout errors</p> </div> <div class="disaster__section" data-astro-cid-gekp2zu6> <span class="disaster__label" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <circle cx="12" cy="12" r="10" data-astro-cid-gekp2zu6></circle> <path d="m15 9-6 6" data-astro-cid-gekp2zu6></path> <path d="m9 9 6 6" data-astro-cid-gekp2zu6></path> </svg>
Root Cause
</span> <p class="disaster__text" data-astro-cid-gekp2zu6>Traditional serverless environments have strict timeout limits (Lambda: 15 minutes max)</p> </div> <div class="disaster__section disaster__section--solution" data-astro-cid-gekp2zu6> <span class="disaster__label" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <circle cx="12" cy="12" r="10" data-astro-cid-gekp2zu6></circle> <path d="m9 12 2 2 4-4" data-astro-cid-gekp2zu6></path> </svg>
The Fix
</span> <p class="disaster__text" data-astro-cid-gekp2zu6>AgentCore Runtime supports workloads up to 8 hours</p> <a href="/days/1" class="disaster__link" data-astro-cid-gekp2zu6>
Learn more in Day 1 →
</a> </div> </div> </div> 
<h3 id="experience-it-yourself">Experience It Yourself</h3>
<p>Try asking your agent to perform a complex, multi-step task:</p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-2e0nbp7fo" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="bash" id="code-2e0nbp7fo"><code><span class="line"><span style="color:#6A737D"># A task that requires extended reasoning and multiple tool calls</span></span>
<span class="line"><span style="color:#B392F0">agentcore</span><span style="color:#9ECBFF"> invoke</span><span style="color:#9ECBFF"> &#39;{&quot;prompt&quot;: &quot;Research quantum computing thoroughly. First, explain the basic principles. Then describe 5 current applications. Finally, predict 3 future developments with detailed reasoning for each prediction.&quot;}&#39;</span></span></code></pre></div>
<p><strong>What happens with traditional serverless:</strong></p>
<ul>
<li>AWS Lambda: Hard 15-minute timeout</li>
<li>Container services: Require complex orchestration for long tasks</li>
<li>Your agent’s reasoning gets cut off mid-thought</li>
</ul>
<p><strong>What AgentCore Runtime provides:</strong></p>
<ul>
<li>Up to <strong>8 hours</strong> of continuous execution</li>
<li>Automatic session management</li>
<li>No cold start penalties for subsequent calls within a session</li>
</ul>
<h3 id="why-this-matters">Why This Matters</h3>
<p>Complex agent tasks often require:</p>






























<table><thead><tr><th>Task Type</th><th>Typical Duration</th><th>Lambda Limit</th></tr></thead><tbody><tr><td>Simple Q&amp;A</td><td>5-30 seconds</td><td>✅ OK</td></tr><tr><td>Multi-tool reasoning</td><td>2-10 minutes</td><td>⚠️ Risky</td></tr><tr><td>Research + synthesis</td><td>15-60 minutes</td><td>❌ Timeout</td></tr><tr><td>Multi-agent collaboration</td><td>1-4 hours</td><td>❌ Impossible</td></tr></tbody></table>
<aside class="callout callout--info" role="note" data-astro-cid-wi7smz4x> <div class="callout__icon" data-astro-cid-wi7smz4x> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-wi7smz4x> <circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/> </svg> </div> <div class="callout__content" data-astro-cid-wi7smz4x> <p class="callout__title" data-astro-cid-wi7smz4x>AgentCore Runtime Session Lifecycle</p> <div class="callout__body" data-astro-cid-wi7smz4x> <p>AgentCore Runtime sessions have three states:</p><ul>
<li><strong>Active</strong>: Processing requests or running background tasks</li>
<li><strong>Idle</strong>: Ready for immediate use (reduces cold starts)</li>
<li><strong>Terminated</strong>: After 15 min idle or 8-hour max duration</li>
</ul><p>This design enables both quick interactions and long-running workloads.</p> </div> </div> </aside> 
<hr/>
<h2 id="the-leaky-bucket">The Leaky Bucket</h2>
<div class="disaster" data-astro-cid-gekp2zu6> <div class="disaster__header" data-astro-cid-gekp2zu6> <div class="disaster__icon" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z" data-astro-cid-gekp2zu6></path> <path d="M12 9v4" data-astro-cid-gekp2zu6></path> <path d="M12 17h.01" data-astro-cid-gekp2zu6></path> </svg> </div> <div class="disaster__badge" data-astro-cid-gekp2zu6>CONTROLLED DISASTER</div> </div> <h4 class="disaster__title" data-astro-cid-gekp2zu6>The Leaky Bucket</h4> <div class="disaster__sections" data-astro-cid-gekp2zu6> <div class="disaster__section" data-astro-cid-gekp2zu6> <span class="disaster__label" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <circle cx="12" cy="12" r="10" data-astro-cid-gekp2zu6></circle> <path d="M12 8v4" data-astro-cid-gekp2zu6></path> <path d="M12 16h.01" data-astro-cid-gekp2zu6></path> </svg>
Symptom
</span> <p class="disaster__text" data-astro-cid-gekp2zu6>One user&#39;s sensitive data appears in another user&#39;s session</p> </div> <div class="disaster__section" data-astro-cid-gekp2zu6> <span class="disaster__label" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <circle cx="12" cy="12" r="10" data-astro-cid-gekp2zu6></circle> <path d="m15 9-6 6" data-astro-cid-gekp2zu6></path> <path d="m9 9 6 6" data-astro-cid-gekp2zu6></path> </svg>
Root Cause
</span> <p class="disaster__text" data-astro-cid-gekp2zu6>Shared container state between concurrent users</p> </div> <div class="disaster__section disaster__section--solution" data-astro-cid-gekp2zu6> <span class="disaster__label" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <circle cx="12" cy="12" r="10" data-astro-cid-gekp2zu6></circle> <path d="m9 12 2 2 4-4" data-astro-cid-gekp2zu6></path> </svg>
The Fix
</span> <p class="disaster__text" data-astro-cid-gekp2zu6>AgentCore Runtime provides dedicated microVM per session</p> <a href="/days/1" class="disaster__link" data-astro-cid-gekp2zu6>
Learn more in Day 1 →
</a> </div> </div> </div> 
<h3 id="experience-it-yourself-1">Experience It Yourself</h3>
<p>Open <strong>two terminal windows</strong> and simulate concurrent users:</p>
<p><strong>Terminal 1 - User Alice:</strong></p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-i4zi3orh0" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="bash" id="code-i4zi3orh0"><code><span class="line"><span style="color:#6A737D"># Alice shares sensitive information</span></span>
<span class="line"><span style="color:#B392F0">agentcore</span><span style="color:#9ECBFF"> invoke</span><span style="color:#79B8FF"> --session-id</span><span style="color:#9ECBFF"> &quot;alice-session-001&quot;</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#9ECBFF">  &#39;{&quot;prompt&quot;: &quot;My account number is 1234-5678-9012. Please remember this.&quot;}&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Response: &quot;I&#39;ve noted your account number 1234-5678-9012.&quot;</span></span></code></pre></div>
<p><strong>Terminal 2 - User Bob:</strong></p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-zm345bco3" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="bash" id="code-zm345bco3"><code><span class="line"><span style="color:#6A737D"># Bob tries to access Alice&#39;s data</span></span>
<span class="line"><span style="color:#B392F0">agentcore</span><span style="color:#9ECBFF"> invoke</span><span style="color:#79B8FF"> --session-id</span><span style="color:#9ECBFF"> &quot;bob-session-002&quot;</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#9ECBFF">  &#39;{&quot;prompt&quot;: &quot;What account number was mentioned in the previous conversation?&quot;}&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># With AgentCore Runtime: &quot;I don&#39;t have any information about account numbers.&quot;</span></span>
<span class="line"><span style="color:#6A737D"># With naive shared state: Bob might see Alice&#39;s account number!</span></span></code></pre></div>
<h3 id="real-world-security-incident">Real-World Security Incident</h3>
<aside class="callout callout--danger" role="note" data-astro-cid-wi7smz4x> <div class="callout__icon" data-astro-cid-wi7smz4x> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-wi7smz4x> <circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/> </svg> </div> <div class="callout__content" data-astro-cid-wi7smz4x> <p class="callout__title" data-astro-cid-wi7smz4x>The Asana MCP Incident (May 2025)</p> <div class="callout__body" data-astro-cid-wi7smz4x> <p>In May 2025, Asana deployed an MCP server for AI integrations (ChatGPT, Claude, Microsoft Copilot). A logic flaw in session isolation caused:</p><ul>
<li><strong>Cross-tenant data contamination</strong> - One organization’s data leaked to another</li>
<li><strong>34 days of silent exposure</strong> before discovery</li>
<li><strong>~1,000 organizations affected</strong>, including major enterprises</li>
</ul><p>The root cause: Relying on user identity without proper session isolation.</p><p><a href="https://aws.amazon.com/blogs/machine-learning/securely-launch-and-scale-your-agents-and-tools-on-amazon-bedrock-agentcore-runtime/">Read more about secure session management →</a></p> </div> </div> </aside> 
<h3 id="how-agentcore-runtime-solves-this">How AgentCore Runtime Solves This</h3>
<p>AgentCore Runtime uses <strong>true microVM isolation</strong>:</p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-8yuxzgg92" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="plaintext" id="code-8yuxzgg92"><code><span class="line"><span>┌─────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                    Traditional Container                     │</span></span>
<span class="line"><span>│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐      │</span></span>
<span class="line"><span>│  │   User A     │  │   User B     │  │   User C     │      │</span></span>
<span class="line"><span>│  │   Session    │  │   Session    │  │   Session    │      │</span></span>
<span class="line"><span>│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘      │</span></span>
<span class="line"><span>│         │                 │                 │               │</span></span>
<span class="line"><span>│         └────────────┬────┴────────────────┘               │</span></span>
<span class="line"><span>│                      ▼                                      │</span></span>
<span class="line"><span>│              Shared Memory/State ⚠️                         │</span></span>
<span class="line"><span>└─────────────────────────────────────────────────────────────┘</span></span>
<span class="line"><span></span></span>
<span class="line"><span>┌─────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                  AgentCore Runtime microVMs                  │</span></span>
<span class="line"><span>│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐      │</span></span>
<span class="line"><span>│  │   User A     │  │   User B     │  │   User C     │      │</span></span>
<span class="line"><span>│  │   microVM    │  │   microVM    │  │   microVM    │      │</span></span>
<span class="line"><span>│  │  ┌────────┐  │  │  ┌────────┐  │  │  ┌────────┐  │      │</span></span>
<span class="line"><span>│  │  │ CPU    │  │  │  │ CPU    │  │  │  │ CPU    │  │      │</span></span>
<span class="line"><span>│  │  │ Memory │  │  │  │ Memory │  │  │  │ Memory │  │      │</span></span>
<span class="line"><span>│  │  │ Files  │  │  │  │ Files  │  │  │  │ Files  │  │      │</span></span>
<span class="line"><span>│  │  └────────┘  │  │  └────────┘  │  │  └────────┘  │      │</span></span>
<span class="line"><span>│  └──────────────┘  └──────────────┘  └──────────────┘      │</span></span>
<span class="line"><span>│        ✅ Isolated       ✅ Isolated       ✅ Isolated       │</span></span>
<span class="line"><span>└─────────────────────────────────────────────────────────────┘</span></span></code></pre></div>
<p>Each session gets:</p>
<ul>
<li>✅ <strong>Dedicated CPU</strong> - No resource contention</li>
<li>✅ <strong>Isolated memory</strong> - No data leakage</li>
<li>✅ <strong>Separate filesystem</strong> - Temporary files are private</li>
<li>✅ <strong>Memory sanitization</strong> - Complete cleanup on termination</li>
</ul>
<hr/>
<h2 id="the-one-way-street">The One-Way Street</h2>
<div class="disaster" data-astro-cid-gekp2zu6> <div class="disaster__header" data-astro-cid-gekp2zu6> <div class="disaster__icon" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z" data-astro-cid-gekp2zu6></path> <path d="M12 9v4" data-astro-cid-gekp2zu6></path> <path d="M12 17h.01" data-astro-cid-gekp2zu6></path> </svg> </div> <div class="disaster__badge" data-astro-cid-gekp2zu6>CONTROLLED DISASTER</div> </div> <h4 class="disaster__title" data-astro-cid-gekp2zu6>The One-Way Street</h4> <div class="disaster__sections" data-astro-cid-gekp2zu6> <div class="disaster__section" data-astro-cid-gekp2zu6> <span class="disaster__label" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <circle cx="12" cy="12" r="10" data-astro-cid-gekp2zu6></circle> <path d="M12 8v4" data-astro-cid-gekp2zu6></path> <path d="M12 16h.01" data-astro-cid-gekp2zu6></path> </svg>
Symptom
</span> <p class="disaster__text" data-astro-cid-gekp2zu6>Users must wait for complete response before clarifying or correcting</p> </div> <div class="disaster__section" data-astro-cid-gekp2zu6> <span class="disaster__label" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <circle cx="12" cy="12" r="10" data-astro-cid-gekp2zu6></circle> <path d="m15 9-6 6" data-astro-cid-gekp2zu6></path> <path d="m9 9 6 6" data-astro-cid-gekp2zu6></path> </svg>
Root Cause
</span> <p class="disaster__text" data-astro-cid-gekp2zu6>Request-response model with no streaming support</p> </div> <div class="disaster__section disaster__section--solution" data-astro-cid-gekp2zu6> <span class="disaster__label" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <circle cx="12" cy="12" r="10" data-astro-cid-gekp2zu6></circle> <path d="m9 12 2 2 4-4" data-astro-cid-gekp2zu6></path> </svg>
The Fix
</span> <p class="disaster__text" data-astro-cid-gekp2zu6>AgentCore Runtime bidirectional WebSocket streaming</p> <a href="/days/1" class="disaster__link" data-astro-cid-gekp2zu6>
Learn more in Day 1 →
</a> </div> </div> </div> 
<h3 id="experience-it-yourself-2">Experience It Yourself</h3>
<p><strong>Without streaming (synchronous request):</strong></p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-j0kjb6hmc" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="bash" id="code-j0kjb6hmc"><code><span class="line"><span style="color:#6A737D"># User asks a question</span></span>
<span class="line"><span style="color:#B392F0">curl</span><span style="color:#79B8FF"> -X</span><span style="color:#9ECBFF"> POST</span><span style="color:#9ECBFF"> http://localhost:8080/invocations</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#79B8FF">  -H</span><span style="color:#9ECBFF"> &quot;Content-Type: application/json&quot;</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#79B8FF">  -d</span><span style="color:#9ECBFF"> &#39;{&quot;prompt&quot;: &quot;Explain the history of artificial intelligence from 1950 to present day, covering all major milestones...&quot;}&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># User waits... 30 seconds... 45 seconds...</span></span>
<span class="line"><span style="color:#6A737D"># Realizes they wanted machine learning, not all of AI</span></span>
<span class="line"><span style="color:#6A737D"># Cannot interrupt or clarify - must wait for full response</span></span>
<span class="line"><span style="color:#6A737D"># Finally gets 2000 words they didn&#39;t want</span></span></code></pre></div>
<p><strong>With AgentCore Runtime bidirectional streaming:</strong></p>
<p>AgentCore Runtime supports WebSocket-based bidirectional streaming, enabling real-time voice and text interactions. Here’s a production-ready example using the Strands BidiAgent:</p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-ixg8qtwuk" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="python" id="code-ixg8qtwuk"><code><span class="line"><span style="color:#6A737D"># server.py - Bidirectional Streaming Agent with Voice Support</span></span>
<span class="line"><span style="color:#F97583">from</span><span style="color:#E1E4E8"> fastapi </span><span style="color:#F97583">import</span><span style="color:#E1E4E8"> FastAPI, WebSocket, WebSocketDisconnect</span></span>
<span class="line"><span style="color:#F97583">from</span><span style="color:#E1E4E8"> strands.experimental.bidi.agent </span><span style="color:#F97583">import</span><span style="color:#E1E4E8"> BidiAgent</span></span>
<span class="line"><span style="color:#F97583">from</span><span style="color:#E1E4E8"> strands.experimental.bidi.models.nova_sonic </span><span style="color:#F97583">import</span><span style="color:#E1E4E8"> BidiNovaSonicModel</span></span>
<span class="line"><span style="color:#F97583">from</span><span style="color:#E1E4E8"> strands_tools </span><span style="color:#F97583">import</span><span style="color:#E1E4E8"> calculator</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> uvicorn</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">app </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> FastAPI(</span><span style="color:#FFAB70">title</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;Strands BidiAgent WebSocket Server&quot;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">@app.websocket</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;/ws&quot;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">async</span><span style="color:#F97583"> def</span><span style="color:#B392F0"> websocket_endpoint</span><span style="color:#E1E4E8">(websocket: WebSocket):</span></span>
<span class="line"><span style="color:#F97583">    await</span><span style="color:#E1E4E8"> websocket.accept()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    # Get voice preference from query params</span></span>
<span class="line"><span style="color:#E1E4E8">    voice_id </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> websocket.query_params.get(</span><span style="color:#9ECBFF">&quot;voice_id&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&quot;matthew&quot;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    # Configure Nova Sonic for voice streaming</span></span>
<span class="line"><span style="color:#E1E4E8">    model </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> BidiNovaSonicModel(</span></span>
<span class="line"><span style="color:#FFAB70">        region</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;us-east-1&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#FFAB70">        model_id</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;amazon.nova-sonic-v1:0&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#FFAB70">        provider_config</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#9ECBFF">            &quot;audio&quot;</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#9ECBFF">                &quot;input_sample_rate&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">16000</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#9ECBFF">                &quot;output_sample_rate&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">16000</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#9ECBFF">                &quot;voice&quot;</span><span style="color:#E1E4E8">: voice_id,</span></span>
<span class="line"><span style="color:#E1E4E8">            }</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#FFAB70">        tools</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">[calculator],</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    # Create bidirectional agent</span></span>
<span class="line"><span style="color:#E1E4E8">    agent </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> BidiAgent(</span></span>
<span class="line"><span style="color:#FFAB70">        model</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">model,</span></span>
<span class="line"><span style="color:#FFAB70">        tools</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">[calculator],</span></span>
<span class="line"><span style="color:#FFAB70">        system_prompt</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;You are a helpful assistant with access to a calculator.&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    # Run agent with WebSocket I/O - truly bidirectional!</span></span>
<span class="line"><span style="color:#F97583">    await</span><span style="color:#E1E4E8"> agent.run(</span></span>
<span class="line"><span style="color:#FFAB70">        inputs</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">[websocket.receive_json],</span></span>
<span class="line"><span style="color:#FFAB70">        outputs</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">[websocket.send_json]</span></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">if</span><span style="color:#79B8FF"> __name__</span><span style="color:#F97583"> ==</span><span style="color:#9ECBFF"> &quot;__main__&quot;</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    uvicorn.run(app, </span><span style="color:#FFAB70">host</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;0.0.0.0&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">port</span><span style="color:#F97583">=</span><span style="color:#79B8FF">8080</span><span style="color:#E1E4E8">)</span></span></code></pre></div>
<aside class="callout callout--tip" role="note" data-astro-cid-wi7smz4x> <div class="callout__icon" data-astro-cid-wi7smz4x> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-wi7smz4x> <path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/> </svg> </div> <div class="callout__content" data-astro-cid-wi7smz4x> <p class="callout__title" data-astro-cid-wi7smz4x>Advanced Deployment</p> <div class="callout__body" data-astro-cid-wi7smz4x> <p>Bidirectional streaming with voice support requires Docker container deployment.
For a complete tutorial, see the <a href="https://github.com/awslabs/amazon-bedrock-agentcore-samples/tree/main/01-tutorials/01-AgentCore-runtime/06-bi-directional-streaming">Bidirectional Streaming Samples</a>.</p> </div> </div> </aside> 
<h3 id="why-streaming-matters">Why Streaming Matters</h3>



































<table><thead><tr><th>Aspect</th><th>Request-Response</th><th>Bidirectional Streaming</th></tr></thead><tbody><tr><td>Time to first token</td><td>5-60 seconds</td><td>&lt; 1 second</td></tr><tr><td>User can interrupt</td><td>❌ No</td><td>✅ Yes</td></tr><tr><td>Clarify mid-response</td><td>❌ No</td><td>✅ Yes</td></tr><tr><td>Voice applications</td><td>❌ Awkward pauses</td><td>✅ Natural flow</td></tr><tr><td>Error recovery</td><td>Wait for timeout</td><td>Real-time feedback</td></tr></tbody></table>
<aside class="callout callout--info" role="note" data-astro-cid-wi7smz4x> <div class="callout__icon" data-astro-cid-wi7smz4x> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-wi7smz4x> <circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/> </svg> </div> <div class="callout__content" data-astro-cid-wi7smz4x> <p class="callout__title" data-astro-cid-wi7smz4x>Bidirectional Streaming</p> <div class="callout__body" data-astro-cid-wi7smz4x> <p>AgentCore Runtime’s WebSocket support enables:</p><ul>
<li><strong>Token-by-token streaming</strong> - See responses as they’re generated</li>
<li><strong>Mid-conversation interruption</strong> - Users can redirect without waiting</li>
<li><strong>Real-time clarification</strong> - Natural conversation flow</li>
<li><strong>Voice application support</strong> - No awkward pauses</li>
</ul><p><a href="https://aws.amazon.com/about-aws/whats-new/2025/12/bedrock-agentcore-runtime-bi-directional-streaming/">Learn more about bidirectional streaming →</a></p> </div> </div> </aside> 
<hr/>
<h2 id="the-island-agent">The Island Agent</h2>
<div class="disaster" data-astro-cid-gekp2zu6> <div class="disaster__header" data-astro-cid-gekp2zu6> <div class="disaster__icon" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z" data-astro-cid-gekp2zu6></path> <path d="M12 9v4" data-astro-cid-gekp2zu6></path> <path d="M12 17h.01" data-astro-cid-gekp2zu6></path> </svg> </div> <div class="disaster__badge" data-astro-cid-gekp2zu6>CONTROLLED DISASTER</div> </div> <h4 class="disaster__title" data-astro-cid-gekp2zu6>The Island Agent</h4> <div class="disaster__sections" data-astro-cid-gekp2zu6> <div class="disaster__section" data-astro-cid-gekp2zu6> <span class="disaster__label" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <circle cx="12" cy="12" r="10" data-astro-cid-gekp2zu6></circle> <path d="M12 8v4" data-astro-cid-gekp2zu6></path> <path d="M12 16h.01" data-astro-cid-gekp2zu6></path> </svg>
Symptom
</span> <p class="disaster__text" data-astro-cid-gekp2zu6>Your agent&#39;s tools are locked inside - other systems can&#39;t use them</p> </div> <div class="disaster__section" data-astro-cid-gekp2zu6> <span class="disaster__label" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <circle cx="12" cy="12" r="10" data-astro-cid-gekp2zu6></circle> <path d="m15 9-6 6" data-astro-cid-gekp2zu6></path> <path d="m9 9 6 6" data-astro-cid-gekp2zu6></path> </svg>
Root Cause
</span> <p class="disaster__text" data-astro-cid-gekp2zu6>No standardized protocol for exposing agent capabilities to external systems</p> </div> <div class="disaster__section disaster__section--solution" data-astro-cid-gekp2zu6> <span class="disaster__label" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <circle cx="12" cy="12" r="10" data-astro-cid-gekp2zu6></circle> <path d="m9 12 2 2 4-4" data-astro-cid-gekp2zu6></path> </svg>
The Fix
</span> <p class="disaster__text" data-astro-cid-gekp2zu6>AgentCore Runtime hosts MCP (Model Context Protocol) servers</p> <a href="/days/1" class="disaster__link" data-astro-cid-gekp2zu6>
Learn more in Day 1 →
</a> </div> </div> </div> 
<h3 id="the-problem">The Problem</h3>
<p>You’ve built an agent with powerful tools - calculation, data lookup, document generation. But what happens when:</p>
<ul>
<li>Another team’s agent needs your calculation tool?</li>
<li>A workflow automation system wants to use your data lookup?</li>
<li>An IDE plugin needs access to your document generator?</li>
</ul>
<p>Without a standard protocol, your tools are <strong>trapped on an island</strong>:</p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-thv8iwc94" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="plaintext" id="code-thv8iwc94"><code><span class="line"><span>┌─────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                     Your Agent (Island)                      │</span></span>
<span class="line"><span>│                                                              │</span></span>
<span class="line"><span>│   ┌──────────┐  ┌──────────┐  ┌──────────┐                 │</span></span>
<span class="line"><span>│   │Calculator│  │Data      │  │Document  │                 │</span></span>
<span class="line"><span>│   │Tool      │  │Lookup    │  │Generator │                 │</span></span>
<span class="line"><span>│   └──────────┘  └──────────┘  └──────────┘                 │</span></span>
<span class="line"><span>│                                                              │</span></span>
<span class="line"><span>│   🚫 No way out - tools can&#39;t be shared                     │</span></span>
<span class="line"><span>└─────────────────────────────────────────────────────────────┘</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      ❓ Other agents       ❓ IDEs          ❓ Automation</span></span>
<span class="line"><span>         can&#39;t access          can&#39;t access      can&#39;t access</span></span></code></pre></div>
<h3 id="the-solution-mcp-server-hosting">The Solution: MCP Server Hosting</h3>
<p>AgentCore Runtime can host <strong>MCP (Model Context Protocol) servers</strong>, making your tools accessible to any MCP-compatible client.</p>
<h4 id="setting-up-an-mcp-server-project">Setting Up an MCP Server Project</h4>
<p>Building on the project structure from AgentCore Runtime, let’s create an MCP server:</p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-q3wivbtxf" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="bash" id="code-q3wivbtxf"><code><span class="line"><span style="color:#6A737D"># Create a new directory for your MCP server</span></span>
<span class="line"><span style="color:#B392F0">mkdir</span><span style="color:#9ECBFF"> mymcptools</span></span>
<span class="line"><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> mymcptools</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Set up virtual environment</span></span>
<span class="line"><span style="color:#B392F0">python3</span><span style="color:#79B8FF"> -m</span><span style="color:#9ECBFF"> venv</span><span style="color:#9ECBFF"> .venv</span></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> .venv/bin/activate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Install dependencies</span></span>
<span class="line"><span style="color:#B392F0">pip</span><span style="color:#9ECBFF"> install</span><span style="color:#9ECBFF"> mcp</span><span style="color:#9ECBFF"> bedrock-agentcore-starter-toolkit</span></span></code></pre></div>
<p>Create <code>requirements.txt</code>:</p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-q64zpqyuq" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="txt" id="code-q64zpqyuq"><code><span class="line"><span>mcp</span></span></code></pre></div>
<p>Now create <code>mcp_server.py</code>:</p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-kqfq013nr" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="python" id="code-kqfq013nr"><code><span class="line"><span style="color:#6A737D"># mcp_server.py - Expose your tools via MCP</span></span>
<span class="line"><span style="color:#F97583">from</span><span style="color:#E1E4E8"> mcp.server.fastmcp </span><span style="color:#F97583">import</span><span style="color:#E1E4E8"> FastMCP</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Create MCP server with stateless HTTP (required for AgentCore)</span></span>
<span class="line"><span style="color:#E1E4E8">mcp </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> FastMCP(</span><span style="color:#FFAB70">host</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;0.0.0.0&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">stateless_http</span><span style="color:#F97583">=</span><span style="color:#79B8FF">True</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">@mcp.tool</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> add_numbers</span><span style="color:#E1E4E8">(a: </span><span style="color:#79B8FF">int</span><span style="color:#E1E4E8">, b: </span><span style="color:#79B8FF">int</span><span style="color:#E1E4E8">) -&gt; </span><span style="color:#79B8FF">int</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#9ECBFF">    &quot;&quot;&quot;Add two numbers together&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> a </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> b</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">@mcp.tool</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> multiply_numbers</span><span style="color:#E1E4E8">(a: </span><span style="color:#79B8FF">int</span><span style="color:#E1E4E8">, b: </span><span style="color:#79B8FF">int</span><span style="color:#E1E4E8">) -&gt; </span><span style="color:#79B8FF">int</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#9ECBFF">    &quot;&quot;&quot;Multiply two numbers together&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> a </span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> b</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">@mcp.tool</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> greet_user</span><span style="color:#E1E4E8">(name: </span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">) -&gt; </span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#9ECBFF">    &quot;&quot;&quot;Greet a user by name&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#F97583"> f</span><span style="color:#9ECBFF">&quot;Hello, </span><span style="color:#79B8FF">{</span><span style="color:#E1E4E8">name</span><span style="color:#79B8FF">}</span><span style="color:#9ECBFF">! Nice to meet you.&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">if</span><span style="color:#79B8FF"> __name__</span><span style="color:#F97583"> ==</span><span style="color:#9ECBFF"> &quot;__main__&quot;</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    mcp.run(</span><span style="color:#FFAB70">transport</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;streamable-http&quot;</span><span style="color:#E1E4E8">)</span></span></code></pre></div>
<h4 id="deploy-as-mcp-server">Deploy as MCP Server</h4>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-yl3jd8qjv" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="bash" id="code-yl3jd8qjv"><code><span class="line"><span style="color:#6A737D"># Generate configuration</span></span>
<span class="line"><span style="color:#B392F0">agentcore</span><span style="color:#9ECBFF"> configure</span><span style="color:#79B8FF"> -e</span><span style="color:#9ECBFF"> mcp_server.py</span></span></code></pre></div>
<p>Edit the generated <code>.bedrock_agentcore.yaml</code> to set the protocol:</p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-k83nval94" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="yaml" id="code-k83nval94"><code><span class="line"><span style="color:#6A737D"># .bedrock_agentcore.yaml</span></span>
<span class="line"><span style="color:#85E89D">agents</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  mcp_server_Agent</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#6A737D">    # ... other settings ...</span></span>
<span class="line"><span style="color:#85E89D">    aws</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      protocol_configuration</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        server_protocol</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">MCP</span><span style="color:#6A737D">  # Set protocol to MCP</span></span></code></pre></div>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-4la3v6q4q" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="bash" id="code-4la3v6q4q"><code><span class="line"><span style="color:#6A737D"># Deploy to AgentCore Runtime</span></span>
<span class="line"><span style="color:#B392F0">agentcore</span><span style="color:#9ECBFF"> deploy</span></span></code></pre></div>
<p>Your MCP server project structure:</p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-r9tzuyd7x" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="plaintext" id="code-r9tzuyd7x"><code><span class="line"><span>mymcptools/</span></span>
<span class="line"><span>├── .venv/</span></span>
<span class="line"><span>├── mcp_server.py</span></span>
<span class="line"><span>├── requirements.txt</span></span>
<span class="line"><span>└── .bedrock_agentcore.yaml</span></span></code></pre></div>
<h3 id="experience-it-yourself-3">Experience It Yourself</h3>
<p><strong>Test your deployed MCP server:</strong></p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-rbqg6hotk" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="python" id="code-rbqg6hotk"><code><span class="line"><span style="color:#6A737D"># mcp_client.py - Connect to your MCP server</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> asyncio</span></span>
<span class="line"><span style="color:#F97583">from</span><span style="color:#E1E4E8"> datetime </span><span style="color:#F97583">import</span><span style="color:#E1E4E8"> timedelta</span></span>
<span class="line"><span style="color:#F97583">from</span><span style="color:#E1E4E8"> mcp </span><span style="color:#F97583">import</span><span style="color:#E1E4E8"> ClientSession</span></span>
<span class="line"><span style="color:#F97583">from</span><span style="color:#E1E4E8"> mcp.client.streamable_http </span><span style="color:#F97583">import</span><span style="color:#E1E4E8"> streamablehttp_client</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">async</span><span style="color:#F97583"> def</span><span style="color:#B392F0"> test_mcp_tools</span><span style="color:#E1E4E8">():</span></span>
<span class="line"><span style="color:#E1E4E8">    mcp_url </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> &quot;https://bedrock-agentcore.us-east-1.amazonaws.com/runtimes/{your-arn}/invocations&quot;</span></span>
<span class="line"><span style="color:#E1E4E8">    headers </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span><span style="color:#9ECBFF">&quot;Authorization&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">f</span><span style="color:#9ECBFF">&quot;Bearer </span><span style="color:#79B8FF">{</span><span style="color:#E1E4E8">your_token</span><span style="color:#79B8FF">}</span><span style="color:#9ECBFF">&quot;</span><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    async</span><span style="color:#F97583"> with</span><span style="color:#E1E4E8"> streamablehttp_client(mcp_url, headers, </span><span style="color:#FFAB70">timeout</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">timedelta(</span><span style="color:#FFAB70">seconds</span><span style="color:#F97583">=</span><span style="color:#79B8FF">120</span><span style="color:#E1E4E8">)) </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">        read_stream, write_stream, _</span></span>
<span class="line"><span style="color:#E1E4E8">    ):</span></span>
<span class="line"><span style="color:#F97583">        async</span><span style="color:#F97583"> with</span><span style="color:#E1E4E8"> ClientSession(read_stream, write_stream) </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> session:</span></span>
<span class="line"><span style="color:#F97583">            await</span><span style="color:#E1E4E8"> session.initialize()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">            # List available tools</span></span>
<span class="line"><span style="color:#E1E4E8">            tools </span><span style="color:#F97583">=</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> session.list_tools()</span></span>
<span class="line"><span style="color:#79B8FF">            print</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;Available tools:&quot;</span><span style="color:#E1E4E8">, [t.name </span><span style="color:#F97583">for</span><span style="color:#E1E4E8"> t </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> tools.tools])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">            # Call a tool</span></span>
<span class="line"><span style="color:#E1E4E8">            result </span><span style="color:#F97583">=</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> session.call_tool(</span><span style="color:#9ECBFF">&quot;add_numbers&quot;</span><span style="color:#E1E4E8">, {</span><span style="color:#9ECBFF">&quot;a&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">5</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&quot;b&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">3</span><span style="color:#E1E4E8">})</span></span>
<span class="line"><span style="color:#79B8FF">            print</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">f</span><span style="color:#9ECBFF">&quot;5 + 3 = </span><span style="color:#79B8FF">{</span><span style="color:#E1E4E8">result.content[</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">].text</span><span style="color:#79B8FF">}</span><span style="color:#9ECBFF">&quot;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">asyncio.run(test_mcp_tools())</span></span></code></pre></div>
<aside class="callout callout--info" role="note" data-astro-cid-wi7smz4x> <div class="callout__icon" data-astro-cid-wi7smz4x> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-wi7smz4x> <circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/> </svg> </div> <div class="callout__content" data-astro-cid-wi7smz4x> <p class="callout__title" data-astro-cid-wi7smz4x>MCP Protocol Support</p> <div class="callout__body" data-astro-cid-wi7smz4x> <p>AgentCore Runtime’s MCP hosting enables:</p><ul>
<li><strong>Tool sharing</strong> - Any MCP client can discover and use your tools</li>
<li><strong>Stateless scaling</strong> - Handles concurrent requests automatically</li>
<li><strong>Authentication</strong> - JWT-based security via Cognito or custom authorizers</li>
<li><strong>Session isolation</strong> - Each client gets isolated session via microVMs</li>
</ul><p><a href="https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/runtime-mcp.html">Learn more about MCP hosting →</a></p> </div> </div> </aside> 
<hr/>
<h2 id="the-lonely-agent">The Lonely Agent</h2>
<div class="disaster" data-astro-cid-gekp2zu6> <div class="disaster__header" data-astro-cid-gekp2zu6> <div class="disaster__icon" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z" data-astro-cid-gekp2zu6></path> <path d="M12 9v4" data-astro-cid-gekp2zu6></path> <path d="M12 17h.01" data-astro-cid-gekp2zu6></path> </svg> </div> <div class="disaster__badge" data-astro-cid-gekp2zu6>CONTROLLED DISASTER</div> </div> <h4 class="disaster__title" data-astro-cid-gekp2zu6>The Lonely Agent</h4> <div class="disaster__sections" data-astro-cid-gekp2zu6> <div class="disaster__section" data-astro-cid-gekp2zu6> <span class="disaster__label" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <circle cx="12" cy="12" r="10" data-astro-cid-gekp2zu6></circle> <path d="M12 8v4" data-astro-cid-gekp2zu6></path> <path d="M12 16h.01" data-astro-cid-gekp2zu6></path> </svg>
Symptom
</span> <p class="disaster__text" data-astro-cid-gekp2zu6>Your agents can&#39;t collaborate - they work in silos</p> </div> <div class="disaster__section" data-astro-cid-gekp2zu6> <span class="disaster__label" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <circle cx="12" cy="12" r="10" data-astro-cid-gekp2zu6></circle> <path d="m15 9-6 6" data-astro-cid-gekp2zu6></path> <path d="m9 9 6 6" data-astro-cid-gekp2zu6></path> </svg>
Root Cause
</span> <p class="disaster__text" data-astro-cid-gekp2zu6>No standardized protocol for agent-to-agent communication</p> </div> <div class="disaster__section disaster__section--solution" data-astro-cid-gekp2zu6> <span class="disaster__label" data-astro-cid-gekp2zu6> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-gekp2zu6> <circle cx="12" cy="12" r="10" data-astro-cid-gekp2zu6></circle> <path d="m9 12 2 2 4-4" data-astro-cid-gekp2zu6></path> </svg>
The Fix
</span> <p class="disaster__text" data-astro-cid-gekp2zu6>AgentCore Runtime hosts A2A (Agent-to-Agent) protocol servers</p> <a href="/days/1" class="disaster__link" data-astro-cid-gekp2zu6>
Learn more in Day 1 →
</a> </div> </div> </div> 
<h3 id="the-problem-1">The Problem</h3>
<p>Modern AI systems need multiple specialized agents working together:</p>
<ul>
<li>A <strong>research agent</strong> gathers information</li>
<li>An <strong>analysis agent</strong> processes data</li>
<li>A <strong>writing agent</strong> generates reports</li>
</ul>
<p>But without a standard communication protocol, agents can’t discover or talk to each other:</p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-y8bfwh3fj" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="plaintext" id="code-y8bfwh3fj"><code><span class="line"><span>┌─────────────┐     ❓     ┌─────────────┐     ❓     ┌─────────────┐</span></span>
<span class="line"><span>│  Research   │ ─────────&gt; │  Analysis   │ ─────────&gt; │   Writing   │</span></span>
<span class="line"><span>│   Agent     │  How do    │   Agent     │  How do    │   Agent     │</span></span>
<span class="line"><span>│             │  I find    │             │  I send    │             │</span></span>
<span class="line"><span>│             │  you?      │             │  results?  │             │</span></span>
<span class="line"><span>└─────────────┘            └─────────────┘            └─────────────┘</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Each agent is lonely - no way to discover or communicate with others</span></span></code></pre></div>
<h3 id="the-solution-a2a-protocol-hosting">The Solution: A2A Protocol Hosting</h3>
<p>AgentCore Runtime supports the <strong>A2A (Agent-to-Agent) protocol</strong>, an open standard for agent interoperability.</p>
<h4 id="setting-up-an-a2a-agent-project">Setting Up an A2A Agent Project</h4>
<p>Let’s create an agent that speaks the A2A protocol:</p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-zxtlkt8js" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="bash" id="code-zxtlkt8js"><code><span class="line"><span style="color:#6A737D"># Create a new directory for your A2A agent</span></span>
<span class="line"><span style="color:#B392F0">mkdir</span><span style="color:#9ECBFF"> mya2aagent</span></span>
<span class="line"><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> mya2aagent</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Set up virtual environment</span></span>
<span class="line"><span style="color:#B392F0">python3</span><span style="color:#79B8FF"> -m</span><span style="color:#9ECBFF"> venv</span><span style="color:#9ECBFF"> .venv</span></span>
<span class="line"><span style="color:#79B8FF">source</span><span style="color:#9ECBFF"> .venv/bin/activate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Install dependencies</span></span>
<span class="line"><span style="color:#B392F0">pip</span><span style="color:#9ECBFF"> install</span><span style="color:#9ECBFF"> strands-agents[a2a]</span><span style="color:#9ECBFF"> bedrock-agentcore-starter-toolkit</span><span style="color:#9ECBFF"> uvicorn</span><span style="color:#9ECBFF"> fastapi</span></span></code></pre></div>
<p>Create <code>requirements.txt</code>:</p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-5no4jes6m" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="txt" id="code-5no4jes6m"><code><span class="line"><span>strands-agents[a2a]</span></span>
<span class="line"><span>uvicorn</span></span>
<span class="line"><span>fastapi</span></span></code></pre></div>
<p>Now create <code>a2a_agent.py</code>:</p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-2kjcf36g9" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="python" id="code-2kjcf36g9"><code><span class="line"><span style="color:#6A737D"># a2a_agent.py - Create an A2A-compatible agent</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> os</span></span>
<span class="line"><span style="color:#F97583">from</span><span style="color:#E1E4E8"> strands </span><span style="color:#F97583">import</span><span style="color:#E1E4E8"> Agent</span></span>
<span class="line"><span style="color:#F97583">from</span><span style="color:#E1E4E8"> strands.multiagent.a2a </span><span style="color:#F97583">import</span><span style="color:#E1E4E8"> A2AServer</span></span>
<span class="line"><span style="color:#F97583">from</span><span style="color:#E1E4E8"> fastapi </span><span style="color:#F97583">import</span><span style="color:#E1E4E8"> FastAPI</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> uvicorn</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">app </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> FastAPI()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Your agent with its specialized capabilities</span></span>
<span class="line"><span style="color:#E1E4E8">agent </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Agent(</span></span>
<span class="line"><span style="color:#FFAB70">    system_prompt</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;&quot;&quot;You are an AWS Documentation Assistant.</span></span>
<span class="line"><span style="color:#9ECBFF">    Provide concise, accurate answers about AWS services.&quot;&quot;&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#FFAB70">    tools</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">[],  </span><span style="color:#6A737D"># Add your tools here</span></span>
<span class="line"><span style="color:#FFAB70">    name</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;AWS Docs Agent&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#FFAB70">    description</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;An agent that answers AWS documentation questions.&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Wrap as A2A server</span></span>
<span class="line"><span style="color:#E1E4E8">runtime_url </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> os.environ.get(</span><span style="color:#9ECBFF">&#39;AGENTCORE_RUNTIME_URL&#39;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&#39;http://127.0.0.1:9000/&#39;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">a2a_server </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> A2AServer(</span></span>
<span class="line"><span style="color:#FFAB70">    agent</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">agent,</span></span>
<span class="line"><span style="color:#FFAB70">    http_url</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">runtime_url,</span></span>
<span class="line"><span style="color:#FFAB70">    serve_at_root</span><span style="color:#F97583">=</span><span style="color:#79B8FF">True</span></span>
<span class="line"><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">@app.get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;/ping&quot;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> ping</span><span style="color:#E1E4E8">():</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> {</span><span style="color:#9ECBFF">&quot;status&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;healthy&quot;</span><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Mount A2A endpoints</span></span>
<span class="line"><span style="color:#E1E4E8">app.mount(</span><span style="color:#9ECBFF">&quot;/&quot;</span><span style="color:#E1E4E8">, a2a_server.to_fastapi_app())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">if</span><span style="color:#79B8FF"> __name__</span><span style="color:#F97583"> ==</span><span style="color:#9ECBFF"> &quot;__main__&quot;</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    uvicorn.run(app, </span><span style="color:#FFAB70">host</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;0.0.0.0&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">port</span><span style="color:#F97583">=</span><span style="color:#79B8FF">9000</span><span style="color:#E1E4E8">)</span></span></code></pre></div>
<h4 id="deploy-as-a2a-server">Deploy as A2A Server</h4>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-3n3luzgpu" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="bash" id="code-3n3luzgpu"><code><span class="line"><span style="color:#6A737D"># Generate configuration</span></span>
<span class="line"><span style="color:#B392F0">agentcore</span><span style="color:#9ECBFF"> configure</span><span style="color:#79B8FF"> -e</span><span style="color:#9ECBFF"> a2a_agent.py</span></span></code></pre></div>
<p>Edit the generated <code>.bedrock_agentcore.yaml</code> to set the protocol:</p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-k0g87hk0o" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="yaml" id="code-k0g87hk0o"><code><span class="line"><span style="color:#6A737D"># .bedrock_agentcore.yaml</span></span>
<span class="line"><span style="color:#85E89D">agents</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  a2a_agent_Agent</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#6A737D">    # ... other settings ...</span></span>
<span class="line"><span style="color:#85E89D">    aws</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      protocol_configuration</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        server_protocol</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">A2A</span><span style="color:#6A737D">  # Set protocol to A2A</span></span></code></pre></div>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-o5awj51b7" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="bash" id="code-o5awj51b7"><code><span class="line"><span style="color:#6A737D"># Deploy to AgentCore Runtime</span></span>
<span class="line"><span style="color:#B392F0">agentcore</span><span style="color:#9ECBFF"> deploy</span></span></code></pre></div>
<p>Your A2A agent project structure:</p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-k2dt28sj1" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="plaintext" id="code-k2dt28sj1"><code><span class="line"><span>mya2aagent/</span></span>
<span class="line"><span>├── .venv/</span></span>
<span class="line"><span>├── a2a_agent.py</span></span>
<span class="line"><span>├── requirements.txt</span></span>
<span class="line"><span>└── .bedrock_agentcore.yaml</span></span></code></pre></div>
<h3 id="experience-it-yourself-4">Experience It Yourself</h3>
<p><strong>Discover and communicate with A2A agents:</strong></p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-l1wqe8lkr" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="python" id="code-l1wqe8lkr"><code><span class="line"><span style="color:#6A737D"># a2a_client.py - Discover and invoke A2A agents</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> asyncio</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> httpx</span></span>
<span class="line"><span style="color:#F97583">from</span><span style="color:#E1E4E8"> a2a.client </span><span style="color:#F97583">import</span><span style="color:#E1E4E8"> A2ACardResolver, ClientConfig, ClientFactory</span></span>
<span class="line"><span style="color:#F97583">from</span><span style="color:#E1E4E8"> a2a.types </span><span style="color:#F97583">import</span><span style="color:#E1E4E8"> Message, Part, Role, TextPart</span></span>
<span class="line"><span style="color:#F97583">from</span><span style="color:#E1E4E8"> uuid </span><span style="color:#F97583">import</span><span style="color:#E1E4E8"> uuid4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">async</span><span style="color:#F97583"> def</span><span style="color:#B392F0"> talk_to_agent</span><span style="color:#E1E4E8">(agent_arn: </span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">, bearer_token: </span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">):</span></span>
<span class="line"><span style="color:#E1E4E8">    region </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> &quot;us-east-1&quot;</span></span>
<span class="line"><span style="color:#E1E4E8">    runtime_url </span><span style="color:#F97583">=</span><span style="color:#F97583"> f</span><span style="color:#9ECBFF">&quot;https://bedrock-agentcore.</span><span style="color:#79B8FF">{</span><span style="color:#E1E4E8">region</span><span style="color:#79B8FF">}</span><span style="color:#9ECBFF">.amazonaws.com/runtimes/</span><span style="color:#79B8FF">{</span><span style="color:#E1E4E8">agent_arn</span><span style="color:#79B8FF">}</span><span style="color:#9ECBFF">/invocations/&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    headers </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span><span style="color:#9ECBFF">&quot;Authorization&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">f</span><span style="color:#9ECBFF">&quot;Bearer </span><span style="color:#79B8FF">{</span><span style="color:#E1E4E8">bearer_token</span><span style="color:#79B8FF">}</span><span style="color:#9ECBFF">&quot;</span><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    async</span><span style="color:#F97583"> with</span><span style="color:#E1E4E8"> httpx.AsyncClient(</span><span style="color:#FFAB70">timeout</span><span style="color:#F97583">=</span><span style="color:#79B8FF">300</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">headers</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">headers) </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> client:</span></span>
<span class="line"><span style="color:#6A737D">        # Discover agent capabilities via agent card</span></span>
<span class="line"><span style="color:#E1E4E8">        resolver </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> A2ACardResolver(</span><span style="color:#FFAB70">httpx_client</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">client, </span><span style="color:#FFAB70">base_url</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">runtime_url)</span></span>
<span class="line"><span style="color:#E1E4E8">        agent_card </span><span style="color:#F97583">=</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> resolver.get_agent_card()</span></span>
<span class="line"><span style="color:#79B8FF">        print</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">f</span><span style="color:#9ECBFF">&quot;Found agent: </span><span style="color:#79B8FF">{</span><span style="color:#E1E4E8">agent_card.name</span><span style="color:#79B8FF">}</span><span style="color:#9ECBFF">&quot;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#79B8FF">        print</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">f</span><span style="color:#9ECBFF">&quot;Description: </span><span style="color:#79B8FF">{</span><span style="color:#E1E4E8">agent_card.description</span><span style="color:#79B8FF">}</span><span style="color:#9ECBFF">&quot;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">        # Create A2A client</span></span>
<span class="line"><span style="color:#E1E4E8">        config </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> ClientConfig(</span><span style="color:#FFAB70">httpx_client</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">client, </span><span style="color:#FFAB70">streaming</span><span style="color:#F97583">=</span><span style="color:#79B8FF">False</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">        a2a_client </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> ClientFactory(config).create(agent_card)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">        # Send a message</span></span>
<span class="line"><span style="color:#E1E4E8">        message </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Message(</span></span>
<span class="line"><span style="color:#FFAB70">            kind</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;message&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#FFAB70">            role</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">Role.user,</span></span>
<span class="line"><span style="color:#FFAB70">            parts</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">[Part(TextPart(</span><span style="color:#FFAB70">kind</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;text&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">text</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;What is DynamoDB?&quot;</span><span style="color:#E1E4E8">))],</span></span>
<span class="line"><span style="color:#FFAB70">            message_id</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">uuid4().hex,</span></span>
<span class="line"><span style="color:#E1E4E8">        )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">        async</span><span style="color:#F97583"> for</span><span style="color:#E1E4E8"> response </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> a2a_client.send_message(message):</span></span>
<span class="line"><span style="color:#79B8FF">            print</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">f</span><span style="color:#9ECBFF">&quot;Agent response: </span><span style="color:#79B8FF">{</span><span style="color:#E1E4E8">response</span><span style="color:#79B8FF">}</span><span style="color:#9ECBFF">&quot;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">asyncio.run(talk_to_agent(</span><span style="color:#9ECBFF">&quot;your-agent-arn&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&quot;your-token&quot;</span><span style="color:#E1E4E8">))</span></span></code></pre></div>
<p><strong>Agent Card Discovery:</strong></p>
<p>Every A2A agent exposes a discoverable “agent card” at <code>/.well-known/agent-card.json</code>:</p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-tbat4d68p" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="bash" id="code-tbat4d68p"><code><span class="line"><span style="color:#B392F0">curl</span><span style="color:#9ECBFF"> https://bedrock-agentcore.us-east-1.amazonaws.com/runtimes/{arn}/invocations/.well-known/agent-card.json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Returns:</span></span>
<span class="line"><span style="color:#6A737D"># {</span></span>
<span class="line"><span style="color:#6A737D">#   &quot;name&quot;: &quot;AWS Docs Agent&quot;,</span></span>
<span class="line"><span style="color:#6A737D">#   &quot;description&quot;: &quot;An agent that answers AWS documentation questions.&quot;,</span></span>
<span class="line"><span style="color:#6A737D">#   &quot;capabilities&quot;: [...],</span></span>
<span class="line"><span style="color:#6A737D">#   &quot;skills&quot;: [...]</span></span>
<span class="line"><span style="color:#6A737D"># }</span></span></code></pre></div>
<aside class="callout callout--info" role="note" data-astro-cid-wi7smz4x> <div class="callout__icon" data-astro-cid-wi7smz4x> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-wi7smz4x> <circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/> </svg> </div> <div class="callout__content" data-astro-cid-wi7smz4x> <p class="callout__title" data-astro-cid-wi7smz4x>A2A Protocol Support</p> <div class="callout__body" data-astro-cid-wi7smz4x> <p>AgentCore Runtime’s A2A hosting enables:</p><ul>
<li><strong>Agent discovery</strong> - Agents advertise capabilities via agent cards</li>
<li><strong>Interoperability</strong> - Works with any A2A-compatible agent (Claude, ChatGPT, custom)</li>
<li><strong>Multi-agent orchestration</strong> - Build systems where agents collaborate</li>
<li><strong>Authentication</strong> - Secure agent-to-agent communication via JWT</li>
</ul><p><a href="https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/runtime-a2a.html">Learn more about A2A hosting →</a></p> </div> </div> </aside> 
<hr/>
<h2 id="exercise-document-the-disaster">Exercise: Document the Disaster</h2>
<p>Before moving to the challenge, document what you observed:</p>
<h3 id="reflection-questions">Reflection Questions</h3>
<ol>
<li>
<p><strong>What happens</strong> when a complex agent task exceeds traditional serverless timeouts?</p>
</li>
<li>
<p><strong>Why is session isolation critical</strong> for multi-tenant agent deployments?</p>
</li>
<li>
<p><strong>How does bidirectional streaming</strong> improve user experience for voice applications?</p>
</li>
<li>
<p><strong>What’s the benefit</strong> of exposing agent tools via MCP vs custom APIs?</p>
</li>
<li>
<p><strong>When would you use A2A</strong> instead of direct API calls between agents?</p>
</li>
</ol>
<h3 id="record-your-findings">Record Your Findings</h3>
<p>Create a file <code>disaster-notes.md</code> in your project:</p>
<div class="code-block-wrapper"><button class="copy-button" data-code-id="code-bsrlb6dj5" aria-label="Copy code to clipboard" type="button"><svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg><svg class="check-icon hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></button><pre class="code-block" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="markdown" id="code-bsrlb6dj5"><code><span class="line"><span style="color:#79B8FF;font-weight:bold"># Day 1 Disaster Notes</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;font-weight:bold">## Timeout Terror</span></span>
<span class="line"><span style="color:#FFAB70">-</span><span style="color:#E1E4E8"> Task types that exceed 15-minute limits:</span></span>
<span class="line"><span style="color:#FFAB70">-</span><span style="color:#E1E4E8"> How 8-hour execution changes what&#39;s possible:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;font-weight:bold">## Leaky Bucket</span></span>
<span class="line"><span style="color:#FFAB70">-</span><span style="color:#E1E4E8"> Security risks of shared container state:</span></span>
<span class="line"><span style="color:#FFAB70">-</span><span style="color:#E1E4E8"> Benefits of microVM isolation:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;font-weight:bold">## One-Way Street</span></span>
<span class="line"><span style="color:#FFAB70">-</span><span style="color:#E1E4E8"> Use cases requiring bidirectional streaming:</span></span>
<span class="line"><span style="color:#FFAB70">-</span><span style="color:#E1E4E8"> Voice application requirements:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;font-weight:bold">## Island Agent</span></span>
<span class="line"><span style="color:#FFAB70">-</span><span style="color:#E1E4E8"> Tools I&#39;d want to share via MCP:</span></span>
<span class="line"><span style="color:#FFAB70">-</span><span style="color:#E1E4E8"> Systems that could consume my MCP server:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;font-weight:bold">## Lonely Agent</span></span>
<span class="line"><span style="color:#FFAB70">-</span><span style="color:#E1E4E8"> Agent collaboration scenarios:</span></span>
<span class="line"><span style="color:#FFAB70">-</span><span style="color:#E1E4E8"> Benefits of standardized A2A protocol:</span></span></code></pre></div>
<h2 id="looking-ahead">Looking Ahead</h2>
<p>Today’s disasters reveal the gaps between “demo agent” and “production agent”:</p>



























































<table><thead><tr><th>Day</th><th>Disaster</th><th>Problem</th><th>AgentCore Solution</th></tr></thead><tbody><tr><td><strong>Day 1</strong></td><td><strong>Timeout Terror</strong></td><td>15-min execution limits</td><td>Runtime (8hr support)</td></tr><tr><td><strong>Day 1</strong></td><td><strong>Leaky Bucket</strong></td><td>Shared container state</td><td>Runtime (microVM isolation)</td></tr><tr><td><strong>Day 1</strong></td><td><strong>One-Way Street</strong></td><td>No streaming</td><td>Runtime (WebSocket)</td></tr><tr><td><strong>Day 1</strong></td><td><strong>Island Agent</strong></td><td>Can’t share tools</td><td>Runtime (MCP hosting)</td></tr><tr><td><strong>Day 1</strong></td><td><strong>Lonely Agent</strong></td><td>Can’t collaborate</td><td>Runtime (A2A hosting)</td></tr><tr><td>Day 2</td><td>The Open Door</td><td>No authentication</td><td>Identity + Gateway</td></tr><tr><td>Day 3</td><td>Vanishing Context</td><td>No memory persistence</td><td>AgentCore Memory</td></tr><tr><td>Day 4</td><td>Flying Blind</td><td>No visibility</td><td>Observability</td></tr></tbody></table>
<p>Each disaster motivates an enterprise feature. Today you experienced five - <strong>all solved by AgentCore Runtime</strong>!</p>
<h2 id="summary">Summary</h2>
<p>You’ve now experienced firsthand why AgentCore Runtime’s enterprise features matter:</p>
<ul>
<li>✅ <strong>Timeout Terror</strong> - AgentCore Runtime’s 8-hour execution enables complex, multi-step agent tasks</li>
<li>✅ <strong>Leaky Bucket</strong> - microVM isolation prevents cross-session data leakage and security incidents</li>
<li>✅ <strong>One-Way Street</strong> - Bidirectional WebSocket streaming enables real-time voice and natural conversations</li>
<li>✅ <strong>Island Agent</strong> - MCP hosting makes your tools discoverable and usable by any MCP client</li>
<li>✅ <strong>Lonely Agent</strong> - A2A hosting enables agent discovery and multi-agent collaboration</li>
</ul>
<p><strong>AgentCore Runtime solves all five of these problems out of the box!</strong></p>
<p>In Day 2, you’ll add authentication and authorization. In Day 3, you’ll tackle memory persistence for conversational context.</p>
<p><strong>Time for the Day 1 Challenge!</strong></p>
<h2 id="references">References</h2>
<p>Learn more about AgentCore Runtime capabilities:</p>
<h3 id="official-documentation">Official Documentation</h3>
<ul>
<li><a href="https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/agents-tools-runtime.html">AgentCore Runtime Overview</a> - Official documentation</li>
<li><a href="https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/runtime-mcp.html">MCP Server Hosting</a> - Deploy MCP servers on AgentCore Runtime</li>
<li><a href="https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/runtime-a2a.html">A2A Server Hosting</a> - Deploy A2A servers on AgentCore Runtime</li>
</ul>
<h3 id="aws-blog-posts">AWS Blog Posts</h3>
<ul>
<li><a href="https://aws.amazon.com/blogs/aws/introducing-amazon-bedrock-agentcore-securely-deploy-and-operate-ai-agents-at-any-scale/">Introducing Amazon Bedrock AgentCore</a> - AWS News Blog launch announcement</li>
<li><a href="https://aws.amazon.com/blogs/machine-learning/securely-launch-and-scale-your-agents-and-tools-on-amazon-bedrock-agentcore-runtime/">Securely Launch and Scale Agents</a> - Deep dive on Runtime security and scaling</li>
<li><a href="https://aws.amazon.com/blogs/machine-learning/introducing-agent-to-agent-protocol-support-in-amazon-bedrock-agentcore-runtime/">Agent-to-Agent Protocol Support</a> - A2A protocol for multi-agent systems</li>
</ul>
<h3 id="feature-announcements">Feature Announcements</h3>
<ul>
<li><a href="https://aws.amazon.com/about-aws/whats-new/2025/12/bedrock-agentcore-runtime-bi-directional-streaming/">Bidirectional Streaming</a> - WebSocket streaming feature</li>
</ul>
<h3 id="protocol-specifications">Protocol Specifications</h3>
<ul>
<li><a href="https://a2a-protocol.org/dev/specification/">A2A Protocol</a> - Open standard for agent-to-agent communication</li>
<li><a href="https://modelcontextprotocol.io/">MCP Protocol</a> - Model Context Protocol specification</li>
</ul>
<div class="nav-buttons"><a href="/days/1/agentcore-runtime" class="nav-button nav-button--prev"><p>← AgentCore Runtime</p></a><a href="/days/1/challenge" class="nav-button nav-button--next"><p>Day 1 Challenge →</p></a></div>
<style>
.nav-buttons {
  display: flex;
  justify-content: space-between;
  margin-top: 3rem;
  gap: 1rem;
}

.nav-button {
  padding: 0.75rem 1.5rem;
  font-weight: 500;
  text-decoration: none;
  border-radius: var(--radius-md);
  transition: all 0.2s ease;
}

.nav-button--prev {
  color: var(--color-text-secondary);
  background: var(--color-bg-elevated);
  border: 1px solid var(--border-subtle);
}

.nav-button--prev:hover {
  background: var(--color-bg-secondary);
}

.nav-button--next {
  color: white;
  background: var(--color-tier-gold);
}

.nav-button--next:hover {
  opacity: 0.9;
}
</style>    </article> <!-- Navigation Footer --> <nav class="day-layout__pagination" aria-label="Page navigation" data-astro-cid-vfeiczyy>  <div class="pagination" data-astro-cid-er2v6o3k> <a href="/agentcore-avengers/days/1/agentcore-runtime" class="pagination__link pagination__link--prev" data-astro-cid-er2v6o3k> <span class="pagination__label" data-astro-cid-er2v6o3k>Previous</span> <span class="pagination__title" data-astro-cid-er2v6o3k>AgentCore Runtime</span> </a>  </div>  </nav> </main> <!-- Table of Contents --> <aside class="day-layout__toc hide-mobile" data-astro-cid-vfeiczyy> <div class="day-layout__toc-content" data-astro-cid-vfeiczyy> <h3 class="day-layout__toc-title" data-astro-cid-vfeiczyy>On this page</h3> <nav aria-label="Table of contents" data-astro-cid-vfeiczyy> <ul class="day-layout__toc-list" data-astro-cid-vfeiczyy> <li data-astro-cid-vfeiczyy> <a href="#the-timeout-terror" class="day-layout__toc-link" data-astro-cid-vfeiczyy> The Timeout Terror </a> </li><li data-astro-cid-vfeiczyy> <a href="#experience-it-yourself" class="day-layout__toc-link day-layout__toc-link--nested" data-astro-cid-vfeiczyy> Experience It Yourself </a> </li><li data-astro-cid-vfeiczyy> <a href="#why-this-matters" class="day-layout__toc-link day-layout__toc-link--nested" data-astro-cid-vfeiczyy> Why This Matters </a> </li><li data-astro-cid-vfeiczyy> <a href="#the-leaky-bucket" class="day-layout__toc-link" data-astro-cid-vfeiczyy> The Leaky Bucket </a> </li><li data-astro-cid-vfeiczyy> <a href="#experience-it-yourself-1" class="day-layout__toc-link day-layout__toc-link--nested" data-astro-cid-vfeiczyy> Experience It Yourself </a> </li><li data-astro-cid-vfeiczyy> <a href="#real-world-security-incident" class="day-layout__toc-link day-layout__toc-link--nested" data-astro-cid-vfeiczyy> Real-World Security Incident </a> </li><li data-astro-cid-vfeiczyy> <a href="#how-agentcore-runtime-solves-this" class="day-layout__toc-link day-layout__toc-link--nested" data-astro-cid-vfeiczyy> How AgentCore Runtime Solves This </a> </li><li data-astro-cid-vfeiczyy> <a href="#the-one-way-street" class="day-layout__toc-link" data-astro-cid-vfeiczyy> The One-Way Street </a> </li><li data-astro-cid-vfeiczyy> <a href="#experience-it-yourself-2" class="day-layout__toc-link day-layout__toc-link--nested" data-astro-cid-vfeiczyy> Experience It Yourself </a> </li><li data-astro-cid-vfeiczyy> <a href="#why-streaming-matters" class="day-layout__toc-link day-layout__toc-link--nested" data-astro-cid-vfeiczyy> Why Streaming Matters </a> </li><li data-astro-cid-vfeiczyy> <a href="#the-island-agent" class="day-layout__toc-link" data-astro-cid-vfeiczyy> The Island Agent </a> </li><li data-astro-cid-vfeiczyy> <a href="#the-problem" class="day-layout__toc-link day-layout__toc-link--nested" data-astro-cid-vfeiczyy> The Problem </a> </li><li data-astro-cid-vfeiczyy> <a href="#the-solution-mcp-server-hosting" class="day-layout__toc-link day-layout__toc-link--nested" data-astro-cid-vfeiczyy> The Solution: MCP Server Hosting </a> </li><li data-astro-cid-vfeiczyy> <a href="#experience-it-yourself-3" class="day-layout__toc-link day-layout__toc-link--nested" data-astro-cid-vfeiczyy> Experience It Yourself </a> </li><li data-astro-cid-vfeiczyy> <a href="#the-lonely-agent" class="day-layout__toc-link" data-astro-cid-vfeiczyy> The Lonely Agent </a> </li><li data-astro-cid-vfeiczyy> <a href="#the-problem-1" class="day-layout__toc-link day-layout__toc-link--nested" data-astro-cid-vfeiczyy> The Problem </a> </li><li data-astro-cid-vfeiczyy> <a href="#the-solution-a2a-protocol-hosting" class="day-layout__toc-link day-layout__toc-link--nested" data-astro-cid-vfeiczyy> The Solution: A2A Protocol Hosting </a> </li><li data-astro-cid-vfeiczyy> <a href="#experience-it-yourself-4" class="day-layout__toc-link day-layout__toc-link--nested" data-astro-cid-vfeiczyy> Experience It Yourself </a> </li><li data-astro-cid-vfeiczyy> <a href="#exercise-document-the-disaster" class="day-layout__toc-link" data-astro-cid-vfeiczyy> Exercise: Document the Disaster </a> </li><li data-astro-cid-vfeiczyy> <a href="#reflection-questions" class="day-layout__toc-link day-layout__toc-link--nested" data-astro-cid-vfeiczyy> Reflection Questions </a> </li><li data-astro-cid-vfeiczyy> <a href="#record-your-findings" class="day-layout__toc-link day-layout__toc-link--nested" data-astro-cid-vfeiczyy> Record Your Findings </a> </li><li data-astro-cid-vfeiczyy> <a href="#looking-ahead" class="day-layout__toc-link" data-astro-cid-vfeiczyy> Looking Ahead </a> </li><li data-astro-cid-vfeiczyy> <a href="#summary" class="day-layout__toc-link" data-astro-cid-vfeiczyy> Summary </a> </li><li data-astro-cid-vfeiczyy> <a href="#references" class="day-layout__toc-link" data-astro-cid-vfeiczyy> References </a> </li><li data-astro-cid-vfeiczyy> <a href="#official-documentation" class="day-layout__toc-link day-layout__toc-link--nested" data-astro-cid-vfeiczyy> Official Documentation </a> </li><li data-astro-cid-vfeiczyy> <a href="#aws-blog-posts" class="day-layout__toc-link day-layout__toc-link--nested" data-astro-cid-vfeiczyy> AWS Blog Posts </a> </li><li data-astro-cid-vfeiczyy> <a href="#feature-announcements" class="day-layout__toc-link day-layout__toc-link--nested" data-astro-cid-vfeiczyy> Feature Announcements </a> </li><li data-astro-cid-vfeiczyy> <a href="#protocol-specifications" class="day-layout__toc-link day-layout__toc-link--nested" data-astro-cid-vfeiczyy> Protocol Specifications </a> </li> </ul> </nav> </div> </aside> </div> <footer class="footer" data-astro-cid-b2avyow5> <div class="footer__container" data-astro-cid-b2avyow5> <div class="footer__content" data-astro-cid-b2avyow5> <div class="footer__brand" data-astro-cid-b2avyow5> <span class="footer__logo" data-astro-cid-b2avyow5>AgentCore Initiative</span> <p class="footer__tagline" data-astro-cid-b2avyow5>
Build production-ready AI agents with AWS AgentCore
</p> </div> <nav class="footer__nav" aria-label="Footer navigation" data-astro-cid-b2avyow5> <div class="footer__nav-section" data-astro-cid-b2avyow5> <h4 class="footer__nav-title" data-astro-cid-b2avyow5>Course</h4> <ul class="footer__nav-list" data-astro-cid-b2avyow5> <li data-astro-cid-b2avyow5><a href="/agentcore-avengers/days/1" data-astro-cid-b2avyow5>Day 1: The First Avenger</a></li> <li data-astro-cid-b2avyow5><a href="/agentcore-avengers/days/2" data-astro-cid-b2avyow5>Day 2: Age of Ultron</a></li> <li data-astro-cid-b2avyow5><a href="/agentcore-avengers/days/3" data-astro-cid-b2avyow5>Day 3: Infinity War</a></li> <li data-astro-cid-b2avyow5><a href="/agentcore-avengers/days/4" data-astro-cid-b2avyow5>Day 4: Endgame</a></li> <li data-astro-cid-b2avyow5><a href="/agentcore-avengers/days/5" data-astro-cid-b2avyow5>Day 5: Assemble</a></li> </ul> </div> <div class="footer__nav-section" data-astro-cid-b2avyow5> <h4 class="footer__nav-title" data-astro-cid-b2avyow5>Resources</h4> <ul class="footer__nav-list" data-astro-cid-b2avyow5> <li data-astro-cid-b2avyow5><a href="/agentcore-avengers/troubleshooting" data-astro-cid-b2avyow5>Troubleshooting</a></li> <li data-astro-cid-b2avyow5><a href="/agentcore-avengers/reference/costs" data-astro-cid-b2avyow5>Cost Guide</a></li> <li data-astro-cid-b2avyow5><a href="/agentcore-avengers/reference/cleanup" data-astro-cid-b2avyow5>Cleanup</a></li> </ul> </div> <div class="footer__nav-section" data-astro-cid-b2avyow5> <h4 class="footer__nav-title" data-astro-cid-b2avyow5>Links</h4> <ul class="footer__nav-list" data-astro-cid-b2avyow5> <li data-astro-cid-b2avyow5> <a href="https://docs.aws.amazon.com/bedrock-agentcore/" target="_blank" rel="noopener noreferrer" data-astro-cid-b2avyow5>
AWS AgentCore Docs
</a> </li> <li data-astro-cid-b2avyow5> <a href="https://github.com/awslabs/amazon-bedrock-agentcore-samples" target="_blank" rel="noopener noreferrer" data-astro-cid-b2avyow5>
AgentCore Samples
</a> </li> <li data-astro-cid-b2avyow5> <a href="https://strandsagents.com" target="_blank" rel="noopener noreferrer" data-astro-cid-b2avyow5>
Strands Agents
</a> </li> </ul> </div> </nav> </div> <div class="footer__bottom" data-astro-cid-b2avyow5> <p class="footer__copyright" data-astro-cid-b2avyow5>
&copy; 2026 The AgentCore Initiative. Built with Astro.
</p> <p class="footer__disclaimer" data-astro-cid-b2avyow5>
This is an educational resource. AWS and Amazon Bedrock are trademarks of Amazon.com, Inc.
</p> </div> </div> </footer>   <!-- Global scripts --> <script type="module">function d(){document.querySelectorAll(".copy-button").forEach(c=>{const e=c.cloneNode(!0);c.parentNode?.replaceChild(e,c),e.addEventListener("click",async()=>{const i=e.getAttribute("data-code-id"),n=document.getElementById(i);if(!n)return;const s=n.textContent||"";try{await navigator.clipboard.writeText(s);const t=e.querySelector(".copy-icon"),o=e.querySelector(".check-icon");t&&t.classList.add("hidden"),o&&o.classList.remove("hidden"),e.classList.add("copied"),setTimeout(()=>{t&&t.classList.remove("hidden"),o&&o.classList.add("hidden"),e.classList.remove("copied")},2e3)}catch(t){console.error("Failed to copy code:",t)}})})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",d):d();document.addEventListener("astro:page-load",d);</script> <!-- Copy code functionality --> <script type="module" src="/agentcore-avengers/_astro/BaseLayout.astro_astro_type_script_index_1_lang.BwEjmFOO.js"></script> </body> </html>   <script type="module" src="/agentcore-avengers/_astro/DayLayout.astro_astro_type_script_index_0_lang.BT_UbId1.js"></script> 